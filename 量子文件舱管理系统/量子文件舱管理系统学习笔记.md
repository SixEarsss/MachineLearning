# é‡å­æ–‡ä»¶èˆ±ç®¡ç†ç³»ç»Ÿå­¦ä¹ ç¬”è®°

### 1.æ–‡ä»¶æ“ä½œä¸ç›®å½•ç®¡ç†ï¼š

è¿™é‡Œä¹‹å‰å­¦pythonçš„æ—¶å€™æ²¡å¤ªè®¤çœŸçœ‹ï¼Œæ‰€ä»¥å€Ÿæ­¤æœºä¼šé‡æ–°å­¦äº†ä¸€éã€‚

#### (1)osæ¨¡å—ï¼š

![](C:\Users\29068\Pictures\Screenshots\å±å¹•æˆªå›¾ 2025-02-12 190833.png)

![](C:\Users\29068\Pictures\Screenshots\å±å¹•æˆªå›¾ 2025-02-12 190849.png)

æ³¨ï¼š(1)os.mkdiråˆ›å»ºçš„æ˜¯ä¸€çº§ç›®å½•ï¼Œéœ€ä¿è¯çˆ¶ç›®å½•ä¸€å®šå­˜åœ¨ï¼›os.makedirså¯ä»¥åˆ›å»ºå¤šçº§ç›®å½•ï¼Œå³ä¾¿è·¯å¾„ä¸­æŸäº›è·¯å¾„ä¸å­˜åœ¨ï¼Œå®ƒéƒ½ä¼šåˆ›å»ºå®Œæ•´è·¯å¾„

(2)

```
os.walk(top[, topdown][, onerror][, followlinks])

```

topï¼šæŒ‡å®šè¦éå†å†…å®¹çš„æ ¹ç›®å½•ã€‚

topdownï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šéå†çš„é¡ºåºã€‚è‹¥å€¼ä¸ºTrueï¼Œè¡¨ç¤ºè‡ªä¸Šè€Œä¸‹éå†ï¼ˆå…ˆéå†æ ¹ç›®å½•ï¼‰ï¼Œè‹¥å€¼ä¸º Falseï¼Œè¡¨ç¤ºè‡ªä¸‹è€Œä¸Šéå†ã€‚ï¼ˆé»˜è®¤å€¼ä¸ºTrueï¼‰

onerrorï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šé”™è¯¯å¤„ç†æ–¹å¼ï¼Œé»˜è®¤å¿½ç•¥ï¼Œä½¿ç”¨æ—¶æŒ‡å®šä¸€ä¸ªé”™è¯¯å¤„ç†å‡½æ•°å³å¯ã€‚

followlinksï¼šå¯é€‰å‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹å°†å‚æ•°å€¼è®¾ä¸ºTrueã€‚

è¿”å›å€¼ï¼šè¿”å›ä¸‰ä¸ªå…ƒç´ (dirpath, dirnames, filenames)

ï¼ˆ3ï¼‰

```
os.path.splitext(filename)

```

å®ƒä¼šå°†æ–‡ä»¶è·¯å¾„æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š

1.ä¸»æ–‡ä»¶å

 2.æ‹“å±•åï¼ˆä»¥.å¼€å¤´çš„éƒ¨åˆ†ï¼‰ï¼ˆæœ‰å¤šä¸ª.åªè¯†åˆ«æœ€åä¸€ä¸ªç‚¹åçš„å†…å®¹ä½œä¸ºæ‹“å±•åï¼‰

```
import os

filename = "data/alien_research.quantum"
root, ext = os.path.splitext(filename)

print(f"ä¸»æ–‡ä»¶åï¼š{root}")  # è¾“å‡ºï¼šdata/alien_research
print(f"æ‰©å±•åï¼š{ext}")   # è¾“å‡ºï¼š.quantum

```



#### (2)shutilæ¨¡å—ï¼š

1.ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•ï¼šshutil.move()

```
shutil.move(src, dst)

```

å°†æ–‡ä»¶æˆ–ç›®å½•ä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®ã€‚å¦‚æœç›®æ ‡è·¯å¾„å·²ç»å­˜åœ¨ï¼Œ`move()` ä¼šè¦†ç›–ç›®æ ‡ï¼ˆå¦‚æœç›®æ ‡æ˜¯æ–‡ä»¶ï¼‰ã€‚å¦‚æœç›®æ ‡æ˜¯ç›®å½•ï¼Œä¼šå°†æºæ–‡ä»¶/ç›®å½•ç§»åŠ¨åˆ°ç›®æ ‡ç›®å½•ä¸‹ã€‚

2.å¤åˆ¶æ–‡ä»¶ï¼šshutil.copy()å’Œshutil.copy2()

```
shutil.copy(src, dst)   # å¤åˆ¶æ–‡ä»¶å†…å®¹
shutil.copy2(src, dst)  # å¤åˆ¶æ–‡ä»¶å†…å®¹å’Œå…ƒæ•°æ®

```

å°†æºæ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡ä½ç½®ã€‚`copy()` åªå¤åˆ¶æ–‡ä»¶å†…å®¹ï¼Œè€Œ `copy2()` ä¼šå¤åˆ¶æ–‡ä»¶å†…å®¹ä»¥åŠå…ƒæ•°æ®ï¼ˆå¦‚ä¿®æ”¹æ—¶é—´ç­‰ï¼‰ã€‚

3.é€’å½’åˆ é™¤ç›®å½•ï¼šshutil.rmtree()

```
shutil.rmtree(path)

```

é€’å½’åœ°åˆ é™¤æŒ‡å®šè·¯å¾„ä¸‹çš„ç›®å½•åŠå…¶æ‰€æœ‰å†…å®¹ï¼ˆæ–‡ä»¶å’Œå­ç›®å½•ï¼‰ã€‚è¿™éå¸¸é€‚åˆæ¸…ç©ºä¸€ä¸ªç›®å½•åŠå…¶å­ç›®å½•ã€‚

4.å¤åˆ¶æ•´ä¸ªç›®å½•ï¼šshutil.copytree()

```
shutil.copytree(src, dst)

```

é€’å½’åœ°å¤åˆ¶æ•´ä¸ªç›®å½•ï¼ŒåŒ…æ‹¬ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ã€‚

5.å‹ç¼©ä¸è§£å‹ï¼šshutil.make_archive()å’Œshutil.unpack_archive()

```
shutil.make_archive(base_name, format, root_dir, base_dir)

```

ç”¨äºåˆ›å»ºå½’æ¡£æ–‡ä»¶ï¼ˆå¦‚ `.zip` æˆ– `.tar`ï¼‰ä»¥åŠè§£å‹å½’æ¡£æ–‡ä»¶

#### ï¼ˆ3ï¼‰æ—¶é—´æˆ³ä¸æ–‡ä»¶é‡å‘½åï¼š

åœ¨æœ¬é¢˜ä¸­ï¼Œä¸ºäº†é˜²æ­¢æœªçŸ¥æ–‡ä»¶æ–‡ä»¶åå‡ºç°å†²çªï¼Œæ‰€ä»¥å¼•å…¥Pythonä¸­çš„datetimeæ¨¡å—æ¥ç”Ÿæˆæ—¶é—´æˆ³ã€‚

æ—¶é—´æˆ³é€šå¸¸ä½¿ç”¨å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ï¼ˆç²¾ç¡®åˆ°ç§’ç”šè‡³æ¯«ç§’ï¼‰ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ ¼å¼ï¼Œç„¶åé™„åŠ åˆ°æ–‡ä»¶åä¸­ã€‚

##### 1.datetime.now()è·å–å½“å‰æ—¶é—´ï¼š

```
import datetime

current_time = datetime.datetime.now()
print(current_time)

```

```
2025-02-12 14:35:47.123456
```

##### 2.strftime(format)æ ¼å¼åŒ–æ—¶é—´ï¼š

è¯¥æ–¹æ³•å¯ä»¥å°†datetimeå¯¹è±¡è½¬åŒ–ä¸ºæ‰€éœ€è¦çš„æ ¼å¼ï¼Œå¯ä»¥ç”¨ä¸åŒçš„æ ¼å¼å­—ç¬¦æ¥è¡¨ç¤ºæ—¥æœŸå–æ—¶é—´çš„å„ä¸ªéƒ¨åˆ†ã€‚

```
timestamp = datetime.datetime.now().strftime("%Y%m%d%H%M%S")
print(timestamp)

```

```
20250212143547
```

##### 3.æ–‡ä»¶é‡å‘½åï¼š

åœ¨å¤„ç†å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œä¸ºäº†é¿å…æ–‡ä»¶åå†²çªï¼Œå¯ä»¥æŠŠæ—¶é—´æˆ³é™„åŠ åˆ°æ–‡ä»¶åä¸­ï¼Œæ¯”å¦‚ï¼š

```
import datetime
import os

filename = "alien_research.quantum"
timestamp = datetime.datetime.now().strftime("%Y%m%d%H%M%S")

# ç”Ÿæˆæ–°çš„æ–‡ä»¶å
new_filename = f"{timestamp}_{filename}"
print(new_filename)

```

#### (4)jsonæ¨¡å—ï¼š

json.dumps()æ–¹æ³•ç”¨äºå°† Python å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²

json.load()æ–¹æ³•ç”¨äºä»jsonæ–‡ä»¶ä¸­è¯»å–æ•°æ®

### 2.ä»£ç å®ç°æµç¨‹ï¼š

##### 1.å®šä¹‰æ–‡ä»¶æ‹“å±•åä¸ç›®æ ‡ç›®å½•çš„æ˜ å°„å…³ç³»ï¼š

å…ˆå®šä¹‰æ˜ å°„å…³ç³»ï¼Œåç»­åœ¨æ–‡ä»¶åˆ†ç±»çš„å‡½æ•°ä¸­å¯ä»¥æ ¹æ®æ–‡ä»¶çš„æ‹“å±•åå¯¹æ–‡ä»¶è¿›è¡Œåˆ†ç±»ã€‚

```
srtucture = {
    '.quantum': ('quantum_core', 'SECTOR-7G'),
    '.holo': ('hologram_vault', 'CHAMBER-12F'),
    '.exo': ('exobiology_lab', 'POD-09X'),
    '.chrono': ('temporal_archive', 'VAULT-00T')
}

```

##### 2.å®šä¹‰ç”¨äºæ–‡ä»¶åˆ†ç±»çš„å‡½æ•°ï¼š

```
# å®šä¹‰æ–‡ä»¶åˆ†ç±»çš„å‡½æ•°
def classify_files(directory):
    # éå†ç›®å½•ä¸­çš„æ–‡ä»¶
    for file in os.listdir(directory):
        file_path = os.path.join(directory, file) # è·å–æ–‡ä»¶çš„å®Œæ•´è·¯å¾„

        if not os.path.isfile(file_path): # å¦‚æœè·¯å¾„ä¸æ˜¯æ–‡ä»¶ï¼Œè·³è¿‡
            continue

        ext = os.path.splitext(file)[1] # å°†æ–‡ä»¶åæ‹†åˆ†ä¸ºæ–‡ä»¶åå’Œæ‹“å±•åä¸¤éƒ¨åˆ†ï¼Œè·å–æ–‡ä»¶æ‹“å±•å
        dest_info = structure.get(ext)
        if dest_info:
            dest_dir = os.path.join(*dest_info)
        else:
            dest_dir = "quantum_quarantine"


        if not dest_info: # å¦‚æœæ˜¯æœªçŸ¥ç±»å‹çš„æ–‡ä»¶
            new_file_name = f"ENCRYPTED_{datetime.now().strftime('%Y%m%d%H%M%S')}_{file}" # è¿›è¡Œé‡å‘½åï¼ˆå‰ç¼€åŠ  ENCRYPTED_ï¼‰å¹¶åŠ ä¸Šæ—¶é—´æˆ³
            dest_path = os.path.join(directory, dest_dir, new_file_name) # ç”Ÿæˆç›®æ ‡è·¯å¾„
        else: # å¦‚æœæ˜¯å·²çŸ¥ç±»å‹çš„æ–‡ä»¶
            new_file_name = f"{datetime.now().strftime('%Y%m%d%H%M%S')}_{file}" # åŒæ ·ä¸ºæ–‡ä»¶å‘½åï¼Œæ·»åŠ æ—¶é—´æˆ³
            dest_path = os.path.join(directory,dest_dir,new_file_name) # ç”Ÿæˆç›®æ ‡è·¯å¾„

        os.makedirs(os.path.dirname(dest_path), exist_ok=True) # åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤¹ï¼Œè‹¥å·²å­˜åœ¨åˆ™ä¸åšä»»ä½•æ“ä½œ

        shutil.move(file_path, dest_path) # å°†æ–‡ä»¶ç§»åŠ¨åˆ°ç›®æ ‡ç›®å½•
        print(f"ç§»åŠ¨ {file} è‡³ {dest_path}") # æ‰“å°æ–‡ä»¶ç§»åŠ¨çš„ä¿¡æ¯
```

è¿™é‡Œå…ˆæ ¹æ®æ–‡ä»¶çš„æ‹“å±•åå°†æ–‡ä»¶æŒ‰ç…§ç¬¬ä¸€æ­¥å®šä¹‰çš„structureè¿›è¡Œåˆ†ç±»ï¼Œåˆ†ç±»ä¹‹åçš„æ–‡ä»¶å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯å·²çŸ¥ç±»å‹çš„æ–‡ä»¶å’ŒæœªçŸ¥ç±»å‹çš„æ–‡ä»¶ã€‚

**`structure.get(ext, "quantum_quarantine/")`**ï¼š

- ```
  dict.get(key, default_value)
  ```

   æ–¹æ³•ä¼šï¼š

  1. **å¦‚æœ `ext` åœ¨ `structure` å­—å…¸ä¸­ï¼Œè¿”å›å¯¹åº”çš„å€¼**ï¼ˆå¦‚ `('.hologram_vault', 'CHAMBER-12F')`ï¼‰ã€‚
  2. **å¦‚æœ `ext` ä¸åœ¨ `structure` ä¸­ï¼Œè¿”å›é»˜è®¤å€¼ `"quantum_quarantine/"`**ã€‚

åœ¨è¿™ä¸€æ­¥å¤„ç†å®Œä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡dest_infoåŒºåˆ†ä¸¤ç§ä¸åŒçš„æ–‡ä»¶ï¼Œå¯¹è¿™ä¸¤ç§æ–‡ä»¶è¿›è¡Œå¯¹åº”çš„å¤„ç†ï¼ˆæ–‡ä»¶å‘½åï¼Œæ·»åŠ æ—¶é—´æˆ³ï¼Œç”Ÿæˆç›®æ ‡è·¯å¾„ï¼‰ã€‚

æœ€ååˆ›å»ºç›®æ ‡æ–‡ä»¶å¤¹å¹¶è¿›è¡Œæ–‡ä»¶ç§»åŠ¨ã€‚

##### 3.å®šä¹‰å…¨æ¯æ—¥å¿—ç”Ÿæˆå‡½æ•°ï¼š

```
# å®šä¹‰ç”Ÿæˆæ—¥å¿—æ–‡ä»¶çš„å‡½æ•°
def generate_log(directory):
    # æ—¥å¿—å¤´éƒ¨
    header = [
        "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”",
        "â”‚ ğŸ›¸ Xia-III ç©ºé—´ç«™æ•°æ®åˆ†å¸ƒå…¨æ¯å›¾ â”‚",
        "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",
        ""
    ]
    # æ—¥å¿—å°¾éƒ¨
    footer = [
        "",
        f"ğŸ¤– SuperNova Â· åœ°çƒæ ‡å‡†æ—¶  {datetime.now().strftime('%Y-%m-%dT%H:%M:%S')}",
        "âš ï¸ è­¦å‘Šï¼šè¯·å‹¿ç›´è§†é‡å­æ–‡ä»¶æ ¸å¿ƒ"
        
    ]

    # æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„
    log_file = os.path.join(directory,"log.txt")
    
    # æ‰“å¼€æ—¥å¿—æ–‡ä»¶è¿›è¡Œå†™å…¥æ“ä½œ
    with open(log_file, "w",encoding="utf-8") as log:
        log.write("\n".join(header) + "\n")  # å†™å…¥å¤´éƒ¨
        
        # å†™å…¥æ—¥å¿—ä¸­é—´éƒ¨åˆ†ä¿¡æ¯
        # éå†æ‰€æœ‰æ–‡ä»¶
        for root,_,files in os.walk(directory):
            level = root.replace(directory, "").count(os.sep) # è®¡ç®—å½“å‰ç›®å½•çš„å±‚çº§
            indent = "â”‚   " * level + "â”œâ”€ " # è®¡ç®—å½“å‰å±‚çº§æ‰€å¯¹åº”çš„ç¼©è¿›
            log.write(f"{indent}ğŸš€ {os.path.basename(root)}\n") # å†™å…¥å½“å‰ç›®å½•çš„åç§°
            for file in files: # éå†å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶
                file_indent = "â”‚   " * (level + 1) + "â”œâ”€ " # è®¡ç®—å½“å‰æ–‡ä»¶æ‰€å¯¹åº”çš„ç¼©è¿› 
                symbol = "ğŸ”®" if "ENCRYPTED" not in file else "âš ï¸" # å¦‚æœæ–‡ä»¶æ²¡æœ‰â€œENCRYPTEDâ€åˆ™ç”¨ğŸ”®æ ‡è®°ï¼Œå¦åˆ™ç”¨âš ï¸
                log.write(f"{file_indent}{symbol} {file}\n") # å†™å…¥æ–‡ä»¶ä¿¡æ¯
        log.write("\n".join(footer) + "\n")  # å†™å…¥å°¾éƒ¨

    return log_file # è¿”å›ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„
```

è¿™é‡Œåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œæ—¥å¿—çš„å¤´éƒ¨ã€å°¾éƒ¨å’Œä¸­éƒ¨ï¼Œå¤´éƒ¨å’Œå°¾éƒ¨ç›¸å¯¹ç®€å•ç›´æ¥å®šä¹‰å³å¯ã€‚

ä¸­éƒ¨éœ€æ ¹æ®ä¸åŒæ–‡ä»¶å±‚çº§è®¡ç®—å¯¹åº”çš„ç¼©è¿›ï¼Œå¯¹å·²çŸ¥ç±»å‹å’ŒæœªçŸ¥ç±»å‹çš„æ–‡ä»¶å¯ä»¥é€šè¿‡ä¹‹å‰æ·»åŠ çš„"ENCRYPTED"æ¥åŒºåˆ†ï¼Œä»è€Œæ·»åŠ ä¸åŒçš„æ ‡å¿—ã€‚

##### 4.å®šä¹‰ç”ŸæˆJSONæ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼š

```
def generate_json_log(directory, log_file):
    # è¯»å–æ—¥å¿—æ–‡ä»¶å†…å®¹
    with open(log_file, "r", encoding="utf-8") as f:
        log_content = f.readlines()  # è¯»å–æ‰€æœ‰è¡Œ

    # ç”Ÿæˆ JSON æ ¼å¼çš„æ—¥å¿—
    json_log = json.dumps({"log_content": log_content}, indent=4, ensure_ascii=False)

    json_log_file = os.path.join(directory, "log.json")  # JSON æ–‡ä»¶è·¯å¾„
    with open(json_log_file, "w", encoding="utf-8") as log:
        log.write(json_log)

    print(f"ç”ŸæˆJSONæ—¥å¿—çš„è·¯å¾„ä¸ºï¼š{json_log_file}")  # æ‰“å° JSON æ—¥å¿—çš„è·¯å¾„

```

è¿™é‡Œä½¿ç”¨JSON.dumps()å°†åŸå…ˆçš„æ—¥å¿—å†…å®¹è½¬æ¢ä¸ºJSONæ ¼å¼ã€‚

```
ensure_ascii=False
```

è¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œ`json.dumps()` ä¼šå°†æ‰€æœ‰é ASCII å­—ç¬¦è½¬ä¹‰æˆ Unicode ç ,è¿™ä¸€è¡Œä»£ç å¯ä»¥ä½¿é ASCII å­—ç¬¦ä¼šä¿ç•™åŸå§‹å½¢æ€ï¼Œè®©JSONæ—¥å¿—çš„å¯è¯»æ€§æ›´å¼ºã€‚

##### 5.ç”Ÿæˆä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼š

```
def generate_test_input(directory):
    # ä½¿ç”¨é¢˜å¹²ä¸­ç»™çš„ç¤ºä¾‹æ–‡ä»¶å
    files = [
        "alien_research.quantum",
        "unknown_species.exo",
        "mystery_signal.chrono",
        "imsb.xyz"
    ]
    
    # åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
    os.makedirs(directory, exist_ok=True)
    
    # ç”Ÿæˆæ–‡ä»¶
    for file in files:
        file_path = os.path.join(directory, file)
        with open(file_path, 'w') as f:
            f.write(f"Sample content for {file}\n")
    
    print(f"å·²åœ¨ '{directory}' ä¸­ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š")
    for file in files:
        print(f" - {file}")
```

### 3.ä»£ç è¿è¡Œç»“æœï¼š

![](C:\Users\29068\Pictures\Screenshots\å±å¹•æˆªå›¾ 2025-03-15 100145.png)

![](C:\Users\29068\Pictures\Screenshots\å±å¹•æˆªå›¾ 2025-03-15 100212.png)

![](C:\Users\29068\Pictures\Screenshots\å±å¹•æˆªå›¾ 2025-03-15 100227.png)
